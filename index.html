<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✱ Forever Header</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Forever Header – A halftone-style header design tool inspired by the ✱ Forever Notes project. Create custom wavy backgrounds with Font Awesome icons and export them as PNGs.">
    <meta name="keywords" content="Forever Header, Forever Notes, halftone, design tool, SVG, Font Awesome, GitHub Pages">
    <meta name="author" content="Nathan Binding">
    
    <!-- Open Graph Meta Tags (For Social Media Previews) -->
    <meta property="og:title" content="✱ Forever Header – Halftone Header Design Tool">
    <meta property="og:description" content="A customizable halftone header generator for notes, inspired by Forever Notes.">
    <meta property="og:image" content="https://private-user-images.githubusercontent.com/22604234/409336882-af5a7edb-d4db-46cb-aa01-287acaaebd96.png">
    <meta property="og:url" content="https://github.com/nbinding/Forever-Header/">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.ico">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <!-- Canvg Library for PNG Export -->
    <script src="https://cdn.jsdelivr.net/npm/canvg@3.0.7/lib/umd.min.js"></script>

    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            text-align: center;
            font-family: Arial, sans-serif;
        }
        .header {
            font-size: 2rem;
            font-weight: bold;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .rounded-box {
            width: 800px;
            height: 200px;
            border-radius: 35px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }
        svg {
            width: 100%;
            height: 100%;
        }
        .btn-container {
            max-width: 800px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .footer {
            margin-top: 20px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="header">✱ Forever Header</div>

    <!-- GitHub Repo Link -->
    <div>
        <a href="https://github.com/nbinding/Forever-Header" target="_blank">
            <img src="https://img.shields.io/badge/GitHub-View%20on%20GitHub-black?style=for-the-badge&logo=github" alt="GitHub Repository">
        </a>
    </div>

    <!-- Halftone Tool -->
    <div class="rounded-box">
        <svg id="halftone-svg" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <style type="text/css">
                    @font-face {
                        font-family: 'FontAwesome';
                        src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/webfonts/fa-solid-900.woff2') format('woff2');
                    }
                    text {
                        font-family: 'FontAwesome';
                    }
                </style>
                <pattern id="halftone-black" width="8" height="8" patternUnits="userSpaceOnUse">
                    <circle cx="4" cy="4" r="2" fill="#000" />
                </pattern>
                <pattern id="halftone-white" width="8" height="8" patternUnits="userSpaceOnUse">
                    <circle cx="4" cy="4" r="2" fill="#fff" />
                </pattern>
                <clipPath id="clip-rounded">
                    <rect x="0" y="0" width="800" height="200" rx="35" ry="35" />
                </clipPath>
            </defs>
            <g clip-path="url(#clip-rounded)">
                <rect width="800" height="200" fill="#c0c0c0" />
                <path id="halftone-path" d="M0 100 Q 200 50, 400 100 T 800 100 V 200 H 0 Z" fill="url(#halftone-black)" />
                <text id="fa-icon-overlay" x="100" y="50%" text-anchor="middle" font-family="FontAwesome" font-size="140" fill="url(#halftone-white)" dominant-baseline="middle">
                    &#xf005; <!-- Default star icon -->
                </text>
            </g>
        </svg>
    </div>

    <!-- Buttons -->
    <div class="btn-container">
        <button id="randomize-shape" class="btn btn-dark">Randomise Shape</button>
        <button id="randomize-icon" class="btn btn-dark">Randomise Icon</button>
        <input id="icon-input" type="text" class="form-control w-auto d-inline" placeholder="Enter Font Awesome class (e.g., fa-solid fa-star)" />
        <button id="apply-icon" class="btn btn-dark">Apply Icon</button>
        <button id="toggle-dither" class="btn btn-dark">Toggle Dither Colour</button>
        <button id="download-image" class="btn btn-dark">Download as PNG</button>
    </div>

    <!-- Buy Me a Coffee -->
    <div style="margin-top: 20px;">
        <script type="text/javascript" 
            src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" 
            data-name="bmc-button" 
            data-slug="nbinding" 
            data-color="#FFDD00" 
            data-emoji="☕"  
            data-font="Cookie" 
            data-text="Buy me a coffee" 
            data-outline-color="#000000" 
            data-font-color="#000000" 
            data-coffee-color="#ffffff">
        </script>
    </div>

    <!-- Footer -->
    <div class="footer">
        Made with ❤️ by <a href="https://github.com/nbinding" target="_blank">nbinding</a>
    </div>

    <!-- JavaScript -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        let ditherColour = "black";

        function updateIcon(unicode) {
            document.getElementById("fa-icon-overlay").innerHTML = unicode;
        }

        document.getElementById("randomize-shape").addEventListener("click", () => {
            const path = document.getElementById("halftone-path");
            const randomY1 = Math.random() * 100 + 50;
            const randomY2 = Math.random() * 100 + 50;
            path.setAttribute("d", `M0 100 Q 200 ${randomY1}, 400 100 T 800 ${randomY2} V 200 H 0 Z`);
        });

        document.getElementById("download-image").addEventListener("click", async () => {
            const svgElement = document.getElementById("halftone-svg");
            const canvas = document.createElement("canvas");
            const ctx = canvas.getContext("2d");

            canvas.width = 800;
            canvas.height = 200;

            const svgData = new XMLSerializer().serializeToString(svgElement);
            const canvgInstance = await canvg.Canvg.fromString(ctx, svgData);
            await canvgInstance.render();

            const link = document.createElement("a");
            link.download = "forever-header.png";
            link.href = canvas.toDataURL("image/png");
            link.click();
        });
    });
    </script>

</body>
</html>
